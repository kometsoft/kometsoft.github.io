---
import { Image } from 'astro:assets'

const currentPath = Astro.url.pathname
---

<div class="sticky top-0 z-10 text-sm sm:text-base w-100">
  <div class="backdrop-blur-md bg-white/80 max-w-screen-2xl px-4 md:px-8 mx-auto transition duration-300 ease-in-out">
    <header class="flex justify-between items-center py-3 md:py-4">
      <a href="/" class="inline-flex items-center text-black-800 text-xl md:text-2xl font-bold gap-2.5" aria-label="logo">
        <!-- <svg width="95" height="94" viewBox="0 0 95 94" class="w-6 h-auto text-primary-500" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M96 0V47L48 94H0V47L48 0H96Z" />
          </svg>

          <span>Kometsoft</span> -->
        <Image src="/images/kometsoft-logo.webp" class="h-10" alt="" height={40} width={181.2} />
      </a>

      <nav class="hidden lg:flex gap-12 items-center">
        <a href="/" class:list={[currentPath === '/' ? 'text-primary-500 font-semibold' : '', 'text-gray-600 hover:text-primary-500 active:text-primary-600 font-semibold transition duration-100']}>Home</a>
        <a href="/blog" class:list={[currentPath.startsWith('/blog') ? 'text-primary-500 font-semibold' : '', 'text-gray-600 hover:text-primary-500 active:text-primary-600 font-semibold transition duration-100']}>Events</a>
        <a href="/lab" class:list={[currentPath.startsWith('/lab') ? 'text-primary-500 font-semibold' : '', 'text-gray-600 hover:text-primary-500 active:text-primary-600 font-semibold transition duration-100']}>Lab Facility</a>
      </nav>

      <a href="/#contact-us" class="hidden lg:inline-block bg-primary-500 hover:bg-primary-600 text-primary-50 focus-visible:ring ring-primary-300 active:text-primary-200 font-semibold text-center rounded-lg outline-none transition duration-100 px-8 py-3">Contact us</a>

      <button type="button" class="toggle-button inline-flex items-center lg:hidden bg-gray-200 hover:bg-gray-300 focus-visible:ring ring-primary-300 text-gray-500 active:text-gray-700 text-sm font-semibold rounded-lg gap-2 px-2.5 py-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
        </svg>

        <span>Menu</span>
      </button>
    </header>
  </div>

  <div class:list={[currentPath === '/' ? 'hidden lg:flex' : 'hidden', 'relative justify-center -mt-4 z-20']}>
    <div class="bg-primary-500 rounded-full px-1 py-2">
      <ul class="flex items-center space-x-8 font-semibold text-sm uppercase tracking-wider">
        <li><a href="/#services" class="px-3 py-1 bg-transparent text-primary-50 rounded-full">Services</a></li>
        <li><a href="/aws" class="px-3 py-1 bg-transparent text-primary-50 rounded-full">AWS</a></li>
        <li><a href="/#tech-stacks" class="px-3 py-1 bg-transparent text-primary-50 rounded-full">Tech</a></li>
        <li><a href="/#clients" class="px-3 py-1 bg-transparent text-primary-50 rounded-full">Clients</a></li>
        <!-- <li><a href="/#aws" class="px-3 py-1 bg-transparent text-primary-50 rounded-full">News</a></li> -->
      </ul>
    </div>
  </div>
</div>

<div id="menu" class="hidden sticky inset-0 top-0 backdrop-blur-md bg-white/80 h-screen z-50 p-10">
  <div class="flex flex-col items-center justify-center h-full">
    <div class="divide-y">
      <div class="flex flex-col items-center space-y-2 pb-4">
        <a href="/" class:list={[currentPath === '/' ? 'text-primary-500 font-semibold' : '', 'text-lg text-gray-600 hover:text-primary-500 active:text-primary-600 font-semibold transition duration-100']}>Home</a>
        <a href="/blog" class:list={[currentPath.startsWith('/blog') ? 'text-primary-500 font-semibold' : '', 'text-lg text-gray-600 hover:text-primary-500 active:text-primary-600 font-semibold transition duration-100']}>Events</a>
        <a href="/lab" class:list={[currentPath.startsWith('/blog') ? 'text-primary-500 font-semibold' : '', 'text-lg text-gray-600 hover:text-primary-500 active:text-primary-600 font-semibold transition duration-100']}>Lab Facility</a>
      </div>
      <div class="pt-4">
        <ul class="flex flex-col items-center space-y-3 font-semibold text-sm uppercase tracking-wider">
          <li><a href="/#services" class="px-3 py-1 bg-transparent text-gray-600 rounded-full">Services</a></li>
          <li><a href="/aws" class="px-3 py-1 bg-transparent text-gray-600 rounded-full">AWS</a></li>
          <li><a href="/#tech-stacks" class="px-3 py-1 bg-transparent text-gray-600 rounded-full">Tech</a></li>
          <li><a href="/#clients" class="px-3 py-1 bg-transparent text-gray-600 rounded-full">Clients</a></li>
          <li><a href="/#aws" class="px-3 py-1 bg-transparent text-gray-600 rounded-full">News</a></li>
        </ul>
      </div>
    </div>
    <button type="button" class="toggle-button rounded-full p-2 transform hover:scale-110 bg-primary-500 text-primary-50 mt-10">
      <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path fill="none" d="M0 0h24v24H0z"></path>
        <path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path>
      </svg>
    </button>
  </div>
</div>

<script>
  document.addEventListener('astro:page-load', () => {
    const toggleButtons = document.getElementsByClassName('toggle-button')
    const menu = document.getElementById('menu')

    for (const button of toggleButtons) {
      button.addEventListener('click', function () {
        menu.classList.toggle('hidden')
      })
    }
  })
</script>
